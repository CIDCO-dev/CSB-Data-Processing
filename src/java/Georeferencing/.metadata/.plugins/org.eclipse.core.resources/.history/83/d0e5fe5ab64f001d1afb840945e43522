package ca.cidco.csb;

import ca.cidco.csb.ppp.NrcanPPP;
import ca.cidco.csb.ppp.PppFile;
import ca.cidco.csb.surveyplatform.hydroblock.Hydroblock20;

public class Main {

	public static void main(String[] args) {
		//TODO: Testing CLI 
		
    	// ubx test if no cli args
//		String test1 = "/home/dominic/Bureau/ubx/2022.06.01_005418.ubx"; 	// Not Valid POS		Bella
//		String test2 = "/home/dominic/Bureau/ubx/2022.09.26_202748.ubx"; 	// Not Valid POS		Bella
//		String test3 = "/home/dominic/Bureau/ubx/2022.09.26_222748.ubx"; 	// Not Valid POS		Bella
//		String test4 = "/home/dominic/Bureau/ubx/2022.09.26_232748.ubx"; 	// Not Valid POS    	Oceanex
//		String test5 = "/home/dominic/Bureau/ubx/2022.10.07_221432.ubx"; 	// Not Valid POS		Oceanex
//		String test6 = "/home/dominic/Bureau/ubx/2022.10.08_011432.ubx"; 	// Not Valid POS		Bella
//		String test7 = "/home/dominic/Bureau/ubx/2022.10.10_194410.ubx"; 	// Not Valid POS		Bella
//		String test8 = "/home/dominic/Bureau/ubx/2022.10.11_224413.ubx";  	// Valid 	 POS		Bella
		
		String test9ubx = "/home/dominic/Bureau/georef/2022.10.11_224413.ubx"; // Valid 	 POS		Bella
		String test9imu = "/home/dominic/Bureau/georef/2022.10.11_223416_imu.txt"; 
		String test9sonar = "/home/dominic/Bureau/georef/2022.10.11_223416_sonar.txt"; 
		String test9 = "/home/dominic/Bureau/georef/"; 
		
		
		//CLI args
/*		String gnssBinaryFile="";
		if (args.length > 0) {
		    try {
		    	gnssBinaryFile = new java.io.File(args[0]).getAbsolutePath();
		    } catch (Exception e) {
		        System.err.println("Argument " + args[0] + " must be an Binary File.");
		        System.exit(1);
		    }
		}
		//If no valid args, use test File 
		else {
			gnssBinaryFile = test8;
			System.err.println("No arg in CLI, processing this test file :"+gnssBinaryFile);
		}
*/		
		// test9 is dataPath with imu sonar and ubx files
		try {
			Hydroblock20 hydro = new Hydroblock20();
			hydro.read(test9);
			
			System.err.println("hydro : " +hydro+"\n\n");
			System.err.println("depths size :"+ hydro.getDepths().size());
			System.err.println("hydro depth 0 : " +hydro.getDepths().get(0));
			System.err.println("hydro depth 100 : " +hydro.getDepths().get(100));
			
			System.err.println("attitudes size :"+ hydro.getAttitudes().size());
			System.err.println("hydro attitude 0 : " +hydro.getAttitudes().get(0));
			System.err.println("hydro attitude 100 : " +hydro.getAttitudes().get(100));
			
			System.err.println("positions size :"+ hydro.getPositions().size());
			System.err.println("hydro position 0 : " +hydro.getPositions().get(0));
			System.err.println("hydro position 100 : " +hydro.getPositions().get(100));

			
//			PppFile pppFile = NrcanPPP.fetchPPP(gnssBinaryFile);
			
			//Make sure pppFile contain positions
//			System.out.println("First position : "+ pppFile.getPositions().get(0).toString());
//			System.out.println("100e position  : "+ pppFile.getPositions().get(100));	
//			int pppSize = pppFile.getPositions().size()-1;
//			System.out.println("size  : "+pppSize);
//			System.out.println("Last position  : "+pppFile.getPositions().get(pppSize));

//			Test pppFile
//			GnssQualifier gnss = new GnssQualifier();
//			gnss.validate(pppFile);
//			if(gnss.isErsValid()) {
//				TODO: ERS georeferencing
//				System.err.println("POS File valid for ERS georeferencing" );
//			}
//			else {
//				if (gnss.isWlrsValid()) {
					//todo wlrs georeferencing
//					System.err.println("POS File valid for WLRS georeferencing only" );
//				}
//				else {
					//("POS File not valid, do nothing" );
//					System.err.println("POS File not valid for georeferencing" );

//				}
//			}
			
		}
		catch(Exception e) {
			System.err.println("Error while georeferencing: " + e.getMessage() );
		}
			

/*
		Georeferencing geo =new Georeferencing();
		geo.dcm(1.054, 4.25, 1.2458);
		
//		public void LatLonH_2_ECEF(double lat, double lon, double ellipsoidal_height, double half_ellipsoidal_axe, double first_eccentricity)
		geo.LatLonH_2_ECEF(46.86194, -4.470, 48.8, 6378137, 0.081819190842622);
*/		
		
		

	}
}
