package ca.cidco.csb;

import ca.cidco.csb.ppp.PppFile;
import ca.cidco.csb.ppp.PppPosition;

import java.io.IOException;


public class GnssQualifier {
	private boolean ersValid=true;
	private boolean wlrsValid=true;
	
	public GnssQualifier(){
	}
	
	public void isValid(PppFile ppp) throws IOException, InterruptedException {

        double nsv_ppp = 6.0;
        double gdop_ppp = 3.5;
        double sdlat_ppp = 5.0;
        double sdlon_ppp = 5.0;
        double sdhgt_ppp = 0.5;
    	
    		//Read POS file line by line

        for (PppPosition pos : ppp.getPppPos()) {
			
        	if (pos.getNsv()< nsv_ppp){
        		System.out.println("return false <nsv> " +pos.getNsv()+ "<" +nsv_ppp);
        		ersValid=false;
        		wlrsValid=false;
        		break;
        	}
        	if(pos.getGdop()> gdop_ppp){
        		System.out.println("return false <gdop> " +pos.getGdop()+ ">" +gdop_ppp);
        		ersValid=false;
        		wlrsValid=false;
        		break;
        	}
        	if (pos.getSdlat()> sdlat_ppp){
        		System.out.println("return false <sdlat> " +pos.getSdlat()+ ">" +sdlat_ppp);
        		ersValid=false;
        		wlrsValid=false;
        		break;
        	}
        	if (pos.getSdlon()> sdlon_ppp){
        		System.out.println("return false <sdlon> "+ pos.getSdlon()+ ">" +sdlon_ppp);
        		ersValid=false;
        		wlrsValid=false;
        		break;
        	}            				
        	if (pos.getSdhgt()> sdhgt_ppp){
        		System.out.println("return false <sdhgt> " + pos.getSdhgt()+">" +sdhgt_ppp);
        		wlrsValid=false;
        		ersValid=false;
        	}               				
        	
    	} 

            	
		System.out.println("GnssQualifier done");
	}
}